@model CreateAppointmentModel
@{
    ViewData["Title"] = "Create an appointment";
}
<style>
    .calendar-buttons {
        display: flex;
        justify-content: space-between;
    }
</style>
@{
    DateTime currentDate = Model.CurrentDateTime;
    var parmsAdd = new Dictionary<string, string>
{
        { "doctorId", Model.DoctorId.ToString() },
        { "address", Model.Address },
        { "date", currentDate.AddDays(7).ToString() }
    };
    var parmsSub = new Dictionary<string, string>
{
        { "doctorId", Model.DoctorId.ToString() },
        { "address", Model.Address },
        { "date", currentDate.AddDays(-7).ToString() }
    };
}
<h1>Create an appointment</h1>

<form asp-controller="Appointment" asp-action="CreateAppointment" method="post">
    <div class="form-group" hidden>
        <label asp-for="ApplicationUserId"></label>
        <input asp-for="ApplicationUserId" class="form-control" />
    </div>
    <div class="form-group" hidden>
        <label asp-for="Address"></label>
        <input asp-for="Address" class="form-control" />
    </div>
    <div class="form-group" hidden>
        <label asp-for="DoctorId"></label>
        <input asp-for="DoctorId" class="form-control" />
    </div>
    <div class="form-group">
        <label asp-for="Detail"></label>
        <input asp-for="Detail" class="form-control" />
    </div>
    <div class="calendar-buttons">
        <input type="button" value="&lt;" onclick="location.href='@Url.Action("CreateAppointmentView", "Appointment", parmsSub)'" />
        <input type="button" value="&gt;" onclick="location.href='@Url.Action("CreateAppointmentView", "Appointment", parmsAdd)'" />
    </div>
    <div class="container">
        <div class="row">

            @for (int j = 0; j < 7; j++)
            {
                DayOfWeek dayOfWeek = currentDate.AddDays(j).DayOfWeek;
                if (!(dayOfWeek == DayOfWeek.Sunday || dayOfWeek == DayOfWeek.Saturday))
                {
                    <div class="col-sm">
                        @currentDate.AddDays(j).ToString("M")
                        @for (int i = 0; i < 16; i++)
                        {
                            DateTime neededTime = new DateTime(currentDate.Year, currentDate.Month, currentDate.Day, 9 + i / 2, 30 * (i % 2), 0);
                            <div class="radio">
                                <label asp-for="StartDateTime">@neededTime.ToShortTimeString()</label>
                                <input type="radio" asp-for="StartDateTime" value="@neededTime" />
                            </div>
                        }
                    </div>
                }
            }
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Save</button>
</form>

